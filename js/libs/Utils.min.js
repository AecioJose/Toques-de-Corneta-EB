Window.prototype.AudioControler=class{constructor(){this.audioElement=new Audio,this.audioElement.crossOrigin="anonymous",this.vol={min:0,max:2,default:1},this.pan={min:-1,max:1,default:0},this.initialized=!1}initialize(){this.initialized||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.source=this.audioCtx.createMediaElementSource(this.audioElement),this.splitter=this.audioCtx.createChannelSplitter(2),this.leftChannel=this.audioCtx.createAnalyser(),this.rightChannel=this.audioCtx.createAnalyser(),this.leftChannel.fftSize=32,this.rightChannel.fftSize=32,this.leftDataArray=new Uint8Array(this.leftChannel.frequencyBinCount),this.rightDataArray=new Uint8Array(this.rightChannel.frequencyBinCount),this.gainNode=new GainNode(this.audioCtx),this.gainNode.gain.value=this.vol.default,this.panner=new StereoPannerNode(this.audioCtx,{pan:this.pan.default}),this.connect(),this.initialized=!0)}connect(){this.source.connect(this.gainNode),this.gainNode.connect(this.panner),this.panner.connect(this.splitter),this.panner.connect(this.audioCtx.destination),this.splitter.connect(this.leftChannel,0,0),this.splitter.connect(this.rightChannel,1,0)}audioContextSuspended(){"suspended"===this.audioCtx.state&&this.audioCtx.resume()}getByteFrequencyDataR(){return this.initialized?(this.rightChannel.getByteFrequencyData(this.rightDataArray),this.rightDataArray):[]}getByteFrequencyDataL(){return this.initialized?(this.leftChannel.getByteFrequencyData(this.leftDataArray),this.leftDataArray):[]}play(){this.initialized&&(this.audioContextSuspended(),this.audioElement.paused)&&this.audioElement.play()}pause(){this.initialized&&(this.audioContextSuspended(),this.audioElement.paused||this.audioElement.pause())}paused(){return this.audioElement.paused}src(t){if(!t)return this.audioElement.src;this.audioElement.src=t}currentTime(t){t&&(this.audioElement.currentTime=t)}addEventListener(...t){this.audioElement.addEventListener(...t)}setVol(t){t&&this.initialized&&(t>this.vol.max||t<this.vol.min||(this.gainNode.gain.value=t))}setPan(t){t&&this.initialized&&(t<this.pan.min||t>this.pan.max||(this.panner.pan.value=t))}},Window.prototype.map=function(t,i,e,n,a,s){t=(t-i)/(e-i)*(a-n)+n;return s?n<a?Math.max(Math.min(t,a),n):Math.max(Math.min(t,n),a):t},Window.prototype.arrayMedia=function(t){return 0===t.length?0:t.reduce((t,i)=>t+i,0)/t.length},Window.prototype.createCanvas=function(t=300,i=300,e="body"){var n=this.document.createElement("canvas");this.canvasCtx=n.getContext("2d"),n.width=t,n.height=i,this.WIDTH=t,this.HEIGHT=i,this.document.querySelector(e).appendChild(n)},Window.prototype.fill=function(t){this.canvasCtx.fillStyle=t},Window.prototype.stroke=function(t="#000000"){this.canvasCtx.strokeStyle=t,this.canvasCtx.stroke()},Window.prototype.strokeWeight=function(t=1){this.canvasCtx.lineWidth=t},Window.prototype.background=function(t){this.fill(t),this.canvasCtx.fillRect(0,0,this.WIDTH,this.HEIGHT)},Window.prototype.backgroundClear=function(){this.canvasCtx.clearRect(0,0,this.WIDTH,this.HEIGHT)},Window.prototype.vertex=function(t,i){this.canvasCtx.lineTo(t,i)},Window.prototype.beginShape=function(){this.canvasCtx.beginPath()},Window.prototype.endShape=function(){this.canvasCtx.closePath(),this.canvasCtx.fill()};